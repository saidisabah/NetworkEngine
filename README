# NetworkEngine

**NetworkEngine** est une application Java distribuÃ©e pour le transfert de fichiers en blocs entre un maÃ®tre (Master), des senders et des receivers. Elle prend en charge plusieurs stratÃ©gies de transfert : `broadcast`, `shuffle Ã©quitable`, `shuffle prioritaire`, et `shuffle optimisÃ©e`.

---

## ğŸ“ Structure du projet

```
NetworkEngine/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ network/engine/broadcast/   # Diffusion en arbre (TreeBroadcast, Cornet, etc.)
â”‚   â”œâ”€â”€ network/engine/core/        # Master, Worker et logique principale
â”‚   â”œâ”€â”€ network/engine/shuffle/     # Transfert shuffle : Ã©quitable, prioritaire, optimisÃ©
â”‚   â”œâ”€â”€ Manifest.txt                # Manifest pour le Master
â”‚   â””â”€â”€ ManifestWorker.txt          # Manifest pour les Workers
â”œâ”€â”€ bin/                            # Fichiers compilÃ©s
â”œâ”€â”€ MasterApp.jar                   # ExÃ©cutable Master
â”œâ”€â”€ WorkerApp.jar                   # ExÃ©cutable Worker
â””â”€â”€ README.md                       # Ce fichier
```

---

## âš™ï¸ Technologies

- Java SE
- TCP/IP Sockets
- Multithreading
- Communication distribuÃ©e
- DÃ©ploiement automatisÃ© via WSL et `deploy.sh`

---

## ğŸ”§ Compilation

Depuis **VS Code**, exÃ©cuter dans le terminal :

```bash
javac -Xlint:unchecked -encoding UTF-8 -d bin src/network/engine/core/*.java src/network/engine/shuffle/*.java src/network/engine/broadcast/*.java
```

CrÃ©ation des fichiers JAR :

```bash
jar cfm MasterApp.jar "src/Manifest.txt" -C bin .
jar cfm WorkerApp.jar "src/ManifestWorker.txt" -C bin .
```

---

## ğŸŒ Connexion VPN (si nÃ©cessaire)

Depuis **PowerShell en mode administrateur** :

```powershell
cd 'C:\Program Files\OpenVPN\bin'
./openvpn --config ..\config\eduvpn.ensma.fr_lias_20250220_bs-vpn.ovpn
```

---

## ğŸš€ DÃ©ploiement & Lancement

### Ã‰tapes dans PowerShell normal :

1. AccÃ©der au terminal WSL :
   ```bash
   wsl
   ```

2. Lancer le script de dÃ©ploiement :
   ```bash
   ./deploy.sh
   ```

> Le script `deploy.sh` utilise `scp` pour transfÃ©rer les fichiers vers les machines distantes, puis ouvre automatiquement un terminal pour chaque exÃ©cution (Master + Workers).

---

## ğŸ§ª ExÃ©cution manuelle

### 1. **TreeBroadcast**

- **Master** :
  ```bash
  java -jar MasterApp.jar
  ```

- **Chaque Worker** :
  ```bash
  java -jar WorkerApp.jar
  ```

---

### 2. **Cornet (numÃ©rotation nÃ©cessaire)**

- **Master** :
  ```bash
  java -jar MasterApp.jar
  ```

- **Chaque Worker** (avec un ID unique) :
  ```bash
  java -jar WorkerApp.jar <id>
  ```

---

### 3. **Shuffle**

Sur chaque machine receiver (et non les senders) :

```bash
MY_IP=192.168.165.126 java -jar WorkerApp.jar
```

> Remplacer `192.168.165.126` par lâ€™adresse IP rÃ©elle du receiver concernÃ©.


 **Master** :
  ```bash
  java -jar MasterApp.jar
  ```
---

## ğŸ“Œ Remarques

- Le fichier `deploy.sh` permet de simplifier le dÃ©ploiement multi-machine.
- Plusieurs stratÃ©gies peuvent Ãªtre comparÃ©es en fonction du volume, du temps dâ€™exÃ©cution, ou du nombre de threads utilisÃ©s.
